{% extends "base.html" %}
{% load static %}

{% block additional_header %}
<link rel="stylesheet" href="{% static "providers/css/categories.css" %}">
{% endblock %}

{% block header-content %}
  {% include "header-slim.html" %}
{% endblock %}

{% block content %}
<div class="container">
  {% if category.parent %}
    <div class="row">
      <div class="col-12">
        <a href="/providers/category/{{category.parent.pk}}">
          Show all <b>{{ category.parent.name }}</b> results
        </a>
      </div>
    </div>
  {% endif %}
  <div class="categories-container">
    <!-- child categories -->
    {% if children|length > 0 %}
      <p>{{ category.name }} Categories</p>
      <div class="row">
        <div class="col-12 categories-flex-container subcategories-flex-container">
          {% for child_category in children %}
            <a class="category-link" href="/providers/category/{{child_category.pk}}/">
              <div class="category-container category-container-slim">
                <img class="category-image" src="{{child_category.image}}">
                <div class="category-name">{{child_category.name}}</div>
              </div>
            </a>
          {% endfor %}
        </div>
      </div>

      <hr />
    {% endif %}

    <div class="row">
      <div class="col-md-4 order-first order-md-2">
        <h3>Refine your search</h3>
      </div>
      <div class="col-md-8 order-last order-md-1">
        {% if provider_products.count > 0 %}
          <div class="row-fluid">
            <div class="col-12 results-count">
              <p>
                <img class="results-category-image" src="{{category.image}}">
                We found <b>{{ provider_products.count }}</b> products for <b>{{category.name }}</b>.
              </p>
            </div>
          </div>
          <div class="row">
            <div class="col-12 products-flex-container">
              {% for product in provider_products %}
                <a class="product-link" href="/providers/product/{{product.pk}}/">
                  <div class="product-container">
                    <div style="product">
                      {{ product.provider.name }}<br/>
                      {{ product.name }}
                    </div>
                  </div>
                </a>
              {% endfor %}
            </div>
          </div>
        {% else %}
          <p>No providers were found meeting these criteria</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
